<app-sidebar />
<p-card header="Alumno">
</p-card>
<p-panel header="Table of Alumns">
  <div class="card">

    <button pButton pRipple type="button" icon="pi pi-plus" class="p-button-rounded p-button-success" (click)="showDialogCreate()" style="margin-bottom: 20px;"></button>
    <p-table [value]="alumnos" [tableStyle]="{ 'min-width': '50rem' }">
      <ng-template pTemplate="header">
        <tr>
          <th>Codigo</th>
          <th>Nombre</th>
          <th>Apellido</th>
          <th>Fecha de Nacimiento</th>
          <th>Carrera</th>
          <th>Correo</th>
          <th>Opciones</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-alumn>
        <tr>
          <td>{{ alumn.codigo }}</td>
          <td>{{ alumn.nombres }}</td>
          <td>{{ alumn.apellidos }}</td>
          <td>{{ alumn.fecha_nac }}</td>
          <td>{{ alumn.carrera.nombre }}</td>
          <td>{{ alumn.correo }}</td>
          <td>
            <button pButton pRipple type="button" icon="pi pi-pencil" class="p-button-rounded" (click)="showDialogEdit(alumn.id)"></button>
            <button pButton pRipple type="button" icon="pi pi-trash" class="p-button-rounded p-button-danger ml-1" (click)="deleteAlumno(alumn.id)"></button>
          </td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</p-panel>


<p-dialog header="{{titulo}}" [modal]="true" [(visible)]="visible" [style]="{ width: '25rem' }">
  <div class="flex flex-column align-items-start gap-3 mb-3">
    <label for="nombre" class="font-semibold w-6rem">Codigo:</label>
      <input pInputText [(ngModel)]="alumno.codigo" name="codigo" id="codigo" class="flex-auto" autocomplete="off"/>
      <label for="nombre" class="font-semibold w-6rem">Nombre:</label>
      <input pInputText [(ngModel)]="alumno.nombres" name="nombre" id="nombre" class="flex-auto" autocomplete="off"/>
      <label for="nombre" class="font-semibold w-6rem">Apellido:</label>
      <input pInputText [(ngModel)]="alumno.apellidos" name="apellido" id="apellido" class="flex-auto" autocomplete="off"/>
      <label for="nombre" class="font-semibold w-6rem">Fecha de Nacimiento:</label>
      <p-calendar [(ngModel)]="alumno.fecha_nac" dateFormat="yy/mm/dd" appendTo="body"></p-calendar>
      <label for="nombre" class="font-semibold w-6rem">Carrera:</label>
      <p-dropdown
      [options]="carreras"
      [(ngModel)]="alumno.carrera"
      optionLabel="nombre"
      placeholder="Selecciona una Carrera" />

      <label for="nombre" class="font-semibold w-6rem">Correo:</label>
      <input pInputText [(ngModel)]="alumno.correo" name="correo" id="correo" class="flex-auto" autocomplete="off"/>
    </div>
    <div class="flex justify-content-end gap-2">
      <p-button label="Cancel" severity="secondary" (click)="visible = false" />
      <p-button label="{{opc}}" (click)="opcion()" />
  </div>

</p-dialog>
